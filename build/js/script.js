$(document).ready(function(){"use strict";$("#bar-chart").length&&($("#btn-add-table-row").on("click",function(t){t.preventDefault();var a=$("<div></div>"),r=$("<div></div>"),e=$("<div></div>"),n=$("<div></div>"),o=$("<input>"),c=$("<input>"),i=$("<a></a>");a.addClass("form-group"),r.addClass("col-md-6 col-sm-6 col-xs-6"),e.addClass("col-md-5 col-sm-5 col-xs-5"),n.addClass("col-md-1 col-sm-1 col-xs-1"),o.addClass("form-control inputDataName"),o.attr("type","text"),o.attr("placeholder","Nama data"),o.attr("maxlength",25),c.addClass("form-control inputDataNum"),c.attr("type","text"),c.attr("placeholder","Angka"),c.attr("maxlength",255),i.addClass("btn btn-danger"),i.attr("href","#"),i.text("X"),r.append(o),e.append(c),n.append(i),a.append(r,e,n),$("#new-table-row").append(a),i.one("click",function(t){t.preventDefault(),a.remove()})}),$("#btn-submit").on("click",function(t){t.preventDefault();var a,r,e,n,o=[],c=[],i="";if(""===$("#chart-title").val().trim())return $("#chart-title").parent().parent().addClass("has-error"),$("#chart-title").focus(),!1;if($("#chart-title").parent().parent().removeClass("has-error"),!(parseInt($("#chart-width").val().trim(),10)>0))return $("#chart-width").parent().parent().addClass("has-error"),$("#chart-width").focus(),!1;if($("#chart-width").parent().parent().removeClass("has-error"),!(parseInt($("#chart-height").val().trim(),10)>0))return $("#chart-height").parent().parent().addClass("has-error"),$("#chart-height").focus(),!1;if($("#chart-height").parent().parent().removeClass("has-error"),""===$("#chart-column-name-1").val().trim())return $("#chart-column-name-1").parent().parent().addClass("has-error"),$("#chart-column-name-1").focus(),!1;if($("#chart-column-name-1").parent().parent().removeClass("has-error"),""===$("#chart-column-name-2").val().trim())return $("#chart-column-name-2").parent().parent().addClass("has-error"),$("#chart-column-name-2").focus(),!1;for($("#chart-column-name-2").parent().parent().removeClass("has-error"),$(".inputDataName").each(function(){""!==$(this).val().trim()&&o.push($(this).val().trim())}),$(".inputDataNum").each(function(){""!==$(this).val().trim()&&c.push($(this).val().trim())}),e=Math.min(o.length,c.length),n=0;e>n;n++)i+="['"+o[n]+"', "+c[n]+"],";console.log(i.substring(0,i.length-1)),r=$("#chart-title").val().trim().toLowerCase().replace(/\s/g,"")+"-"+Date.now(),a='<div id="'+r+'"></div>\n',a+='<script src="https://www.google.com/jsapi" type="text/javascript"></script>\n',a+='<script type="text/javascript">\n',a+="(function () {\n",a+="google.load('visualization', '1', { 'packages' : ['corechart'] });\n",a+="google.setOnLoadCallback(drawBarChart);\n",a+="function drawBarChart() {\n",a+="var data = new google.visualization.DataTable();\n",a+="data.addColumn('string', '"+$("#chart-column-name-1").val().trim()+"');\n",a+="data.addColumn('number', '"+$("#chart-column-name-2").val().trim()+"');\n",a+="data.addRows([ "+i.substring(0,i.length-1)+" ]);\n",a+="var options = { 'title' : '"+$("#chart-title").val().trim()+"', 'width': "+$("#chart-width").val().trim()+", 'height': "+$("#chart-height").val().trim()+" };\n",a+="var barChart = new google.visualization.BarChart(document.getElementById('"+r+"'));\n",a+="barChart.draw(data, options);\n",a+="}\n",a+="}());\n",a+="</script>",$("#chart-code").text(a).css("overflow","hidden"),window.setTimeout(function(){var t=$("#chart-code")[0].scrollHeight;$("#chart-code").height(t-15),$("#chart-code").select()},1)}))});
